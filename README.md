<!-- Banner -->
<div align="center">

```
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•   â•šâ•â•    â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•
```

### âš¡ Next-Gen Telegram File Sharing & Monetization Bot âš¡

> ğŸš€ **Share files. Lock content. Earn money.** â€” All inside Telegram.
> FileStore is a **lightning-fast** ğŸ”¥ bot with built-in Force-Subscribe ğŸ›¡ï¸, Ad-Shortener monetization ğŸ’°, Premium tiers ğŸ’, auto-deletion â³, and a **full admin panel** ğŸ‘‘ â€” zero coding needed after deploy.

[![Python](https://img.shields.io/badge/Python-3.10+-3776AB?style=for-the-badge&logo=python&logoColor=white)](https://python.org)
[![Pyrogram](https://img.shields.io/badge/Pyrogram-v2-blueviolet?style=for-the-badge&logo=telegram&logoColor=white)](https://pyrogram.org)
[![MongoDB](https://img.shields.io/badge/MongoDB-Atlas-47A248?style=for-the-badge&logo=mongodb&logoColor=white)](https://mongodb.com)
[![License](https://img.shields.io/badge/License-GPLv3-red?style=for-the-badge)](LICENSE)
[![Stars](https://img.shields.io/github/stars/Itzmepromgitman/FileStore?style=for-the-badge&color=yellow)](https://github.com/Itzmepromgitman/FileStore/stargazers)

</div>

---

## ğŸ§  What is FileStore?

**FileStore** is a production-ready, fully async Telegram Bot built for high-traffic file distribution. Unlike generic file bots, it ships with:

- ğŸ”¥ **uvloop** for a blazing-fast event loop
- ğŸ›¡ï¸ **Semaphore-guarded** request handling â€” no server crashes under load
- ğŸ’° **Monetization-first design** â€” force users through ad-shorteners or pay for premium

> Built with **Pyrogram v2**, **MongoDB**, **aiohttp**, and love for reliability.

---

## âœ¨ Feature Showcase

<details open>
<summary><b>ğŸ›¡ï¸ Force Subscribe System</b></summary>

- **Normal F-Sub**: Requires users to join specified channels before accessing files
- **Request F-Sub (R-Sub)**: Requires users to send a join _request_ (great for private/approval channels)
- Add or remove channels live from within Telegram via the `/fsub` command panel
- Supports multiple channels simultaneously with per-channel join buttons

</details>

<details open>
<summary><b>ğŸ”— Ad-Shortener Monetization</b></summary>

Two powerful modes:

| Mode | How It Works |
|------|-------------|
| **24H Pass** | User watches one ad â†’ unlocked for 24 hours |
| **Per Link** | Every file request requires an ad click |

Premium users **bypass ads entirely**. Set via `/shortner` panel.

</details>

<details open>
<summary><b>âš¡ High Performance Architecture</b></summary>

- `uvloop` + `tgcrypto` â€” **2â€“4Ã—** faster than standard asyncio
- `GLOBAL_SEMAPHORE(100)` â€” caps concurrent `/start` executions
- Per-user `asyncio.Lock` â€” eliminates race conditions
- `flood_safe()` â€” automatic FloodWait retry with exponential backoff
- Auto-delete & broadcast run as **background tasks** â€” main coroutine returns instantly

</details>

<details>
<summary><b>ğŸ‘‘ Admin Panel & Controls</b></summary>

Everything controlled from within Telegram â€” no SSH, no config files:

- Add/Remove Admins
- Configure Shortener API, Website and Bypass count
- Toggle Content Protection, Caption Hiding, Auto-Delete timer
- Manage Premium users
- Pull server logs with `/log`
- Hot-restart bot with `/restart`

</details>

<details>
<summary><b>ğŸ“¦ Batch File Delivery</b></summary>

- Encode any range of DB channel messages into a single shareable Base64 link
- Supports 1 file or 100+ files in a single link
- Semaphore-controlled copy loop prevents API spam

</details>

---

## ğŸ—ï¸ Project Structure

```
FileStore/
â”‚
â”œâ”€â”€ ğŸ“„ bot.py              â† Pyrogram Client + startup logic
â”œâ”€â”€ ğŸ“„ config.py           â† ENV loading with MongoDB fallback
â”œâ”€â”€ ğŸ“„ main.py             â† Entry point
â”œâ”€â”€ ğŸ“„ helper_func.py      â† Base64, Shortzy, flood-safe helpers
â”œâ”€â”€ ğŸ“„ users.py            â† User management
â”œâ”€â”€ ğŸ“„ update.py           â† Auto-update from upstream
â”‚
â”œâ”€â”€ ğŸ“ plugins/
â”‚   â”œâ”€â”€ start.py           â† /start, file delivery, rate limiting
â”‚   â”œâ”€â”€ new.py             â† All commands + global callback router
â”‚   â”œâ”€â”€ link_generator.py  â† Batch link generation
â”‚   â”œâ”€â”€ channel_post.py    â† Channel post handler
â”‚   â””â”€â”€ cbb.py
â”‚
â”œâ”€â”€ ğŸ“ command/
â”‚   â”œâ”€â”€ admin.py           â† Shortener & admin panel logic
â”‚   â”œâ”€â”€ fsub.py            â† F-Sub / R-Sub management
â”‚   â”œâ”€â”€ work.py            â† Subscription verification engine
â”‚   â”œâ”€â”€ call.py            â† Settings callbacks
â”‚   â”œâ”€â”€ call2.py           â† Auto-delete callbacks
â”‚   â”œâ”€â”€ pre.py             â† Premium tier management
â”‚   â”œâ”€â”€ restart.py         â† Process restart handler
â”‚   â””â”€â”€ setting.py         â† /file settings
â”‚
â”œâ”€â”€ ğŸ“ database/
â”‚   â””â”€â”€ database.py        â† MongoDB abstraction (get/set variable)
â”‚
â””â”€â”€ ğŸ“ basic/
    â””â”€â”€ loop.py            â† Background API-switch loop
```

---

## âš™ï¸ Configuration

### ğŸ”´ Required Variables

| Variable | Description |
|----------|-------------|
| `TG_BOT_TOKEN` | Bot token from [@BotFather](https://t.me/BotFather) |
| `APP_ID` | API ID from [my.telegram.org](https://my.telegram.org) |
| `API_HASH` | API Hash from [my.telegram.org](https://my.telegram.org) |
| `owner` | Your Telegram User ID (master admin) |
| `CHANNEL_ID` | DB Channel ID (e.g. `-1001234567890`) |
| `DATABASE_URL` | MongoDB connection URI |

### ğŸŸ¡ Optional Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `PORT` | `8080` | Web server port |
| `TG_BOT_WORKERS` | `500` | Worker thread count |
| `START_MSG` | Built-in | Custom HTML welcome message (`{mention}`, `{first}`, `{id}`) |

---

## ğŸ“œ Command Reference

```
â”Œâ”€ USER COMMANDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /start          Start the bot or open a shared file link  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ ADMIN COMMANDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /admin          Master admin management panel             â”‚
â”‚  /shortner       Configure Ad-Shortener settings           â”‚
â”‚  /fsub           Manage Force-Subscribe channels           â”‚
â”‚  /file           File delivery settings                    â”‚
â”‚  /auto_del       Auto-delete timer configuration           â”‚
â”‚  /add_prem       Grant a user Premium access               â”‚
â”‚  /rem_prem       Revoke Premium access                     â”‚
â”‚  /list_prem      List all Premium users                    â”‚
â”‚  /users          Total user count                          â”‚
â”‚  /broadcast      Broadcast message to all users            â”‚
â”‚  /log            Fetch server log file directly in chat    â”‚
â”‚  /restart        Hot-restart the bot process               â”‚
â”‚  /code           Extract HTML caption from a message       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ OWNER ONLY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /config         Set any DB variable manually              â”‚
â”‚  /get            Read any DB variable value                â”‚
â”‚  /reset          Reset R-Sub tracking data                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment

### Option 1 â€” VPS / Local

```bash
# Clone the repository
git clone https://github.com/Itzmepromgitman/FileStore
cd FileStore

# Install requirements
pip3 install -r requirements.txt

# Set ENV variables (or edit config.py)
export TG_BOT_TOKEN="your_bot_token"
export APP_ID="your_app_id"
export API_HASH="your_api_hash"
export owner="your_telegram_id"
export CHANNEL_ID="your_channel_id"
export DATABASE_URL="your_mongodb_uri"

# Start the bot
python3 bot.py
```

### Option 2 â€” Docker

```bash
docker build -t FileStore .
docker run --env-file .env FileStore
```

### Option 3 â€” Heroku

[![Deploy to Heroku](https://www.herokucdn.com/deploy/button.svg)](https://heroku.com/deploy)

---

## ğŸ” Security Checklist

Before going public or deploying, ensure:

- [ ] All ENV variables are set via environment â€” **no hardcoded tokens in code**
- [ ] Bot is Admin in DB Channel with **Send Messages** permission
- [ ] Bot is Admin in F-Sub channels with **Invite Users via Link** permission
- [ ] MongoDB URI is private and not committed to version control
- [ ] `.gitignore` includes `.env`, `*.session`, and `bot.txt`

---

## ğŸ“¦ Requirements

```
pyrogram
pyromod
tgcrypto
motor
uvloop
aiohttp
shortzy
```

```bash
pip3 install -r requirements.txt
```

---

## ğŸ™Œ Credits & Acknowledgements

| Contributor | Role |
|---|---|
| [Pyrogram](https://github.com/pyrogram/pyrogram) | Core Telegram MTProto framework |
| [pyromod](https://github.com/usernein/pyromod) | Conversational `client.listen()` support |
| [shortzy](https://github.com/theshreyanshpanchal/shortzy) | URL shortener API adapter |
| [CodeXBotz](https://github.com/CodeXBotz/File-Sharing-Bot) | Original inspiration |

---

## ğŸ“œ License

Distributed under the **GNU General Public License v3.0**.
See [`LICENSE`](LICENSE) for full details.

---

<div align="center">

**If this project helped you, please drop a â­ â€” it means a lot!**

Made with ğŸ”¥ + Python + too much caffeine

</div>
